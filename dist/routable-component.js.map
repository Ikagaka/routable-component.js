/* (C) 2016 Narazaka : Licensed under The MIT License - https://narazaka.net/license/MIT?2016 */
{"version":3,"sources":["webpack:///webpack/bootstrap 5711f27f14045960982a","webpack:///./src/lib/routable-component.js","webpack:///./~/events/events.js"],"names":[],"mappings":"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ACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,gBAAe,SAAS;AACxB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,IAAG;AACH,qBAAoB,SAAS;AAC7B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA","file":"routable-component.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 5711f27f14045960982a\n **/","import {EventEmitter} from 'events';\n\n/**\n * ルーティング可能なコンポーネント\n */\nexport class RoutableComponent extends EventEmitter {\n  constructor() {\n    super();\n    this._models = {};\n    this._controllers = {};\n  }\n\n  /**\n   * Models\n   * @type {Hash<Object>}\n   */\n  get models() { return this._models; }\n\n  /**\n   * Controllers\n   * @type {Hash<RoutableComponentController>}\n   */\n  get controllers() { return this._controllers; }\n}\n\n/**\n * ルーティング設定定義\n * @interface\n */\nexport class RoutableComponentRouting {\n  /**\n   * ルーティングをセットアップする\n   * @param {RoutableComponentRoutes} routes ルーティング設定\n   * @return {void}\n   */\n  setup(routes) {\n    throw new Error('abstruct');\n  }\n}\n\n/**\n * コントローラ\n * @interface\n */\nexport class RoutableComponentController {\n  /**\n   * コンストラクタ\n   * @param {RoutableComponent} component コンポーネント\n   */\n  constructor(component) {\n    throw new Error('abstruct');\n  }\n}\n\n/**\n * イベントのルーティング設定\n * @notice スレッドセーフではありません\n */\nexport class RoutableComponentRoutes {\n  /**\n   * コンストラクタ\n   * @param {RoutableComponentRouting|RoutableComponentRouting[]} routing_classes ルート定義クラス(の配列)\n   */\n  constructor(routing_classes = []) {\n    this._routes = [];\n    this.include_route(routing_classes);\n  }\n\n  /**\n   * ルートを設定する\n   * @param {Route|Route[]} routing_classes ルート定義クラス(の配列)\n   * @return {void}\n   */\n  include_route(routing_classes) {\n    const _routing_classes = routing_classes instanceof Array ? routing_classes : [routing_classes];\n    for (const route_class of _routing_classes) {\n      const route = new route_class();\n      route.setup(this);\n    }\n  }\n\n  /**\n   * コンポーネントのもつイベント発火要素のイベントにルーティングを設定する\n   * @param {RoutableComponent} component コンポーネント\n   * @param {Hash<RoutableComponentController>} controller_classes コントローラクラスの連想配列\n   * @return {void}\n   */\n  setup_to(component, controller_classes) {\n    this._check_routes_requirements(component, controller_classes);\n    for (const route of this._routes) {\n      component[route.from].on(route.event, (...args) => {\n        if (!component.controllers[route.controller]) { // なければコントローラを初期化\n          component.controllers[route.controller] =\n            new controller_classes[route.controller](component);\n        }\n        component.controllers[route.controller][route.action](...args);\n      });\n    }\n  }\n\n  _check_routes_requirements(component, controller_classes) {\n    for (const route of this._routes) {\n      if (!(route.controller in controller_classes)) {\n        throw new Error(`controller [${route.controller}] not found`);\n      }\n      if (!(route.from in component)) {\n        throw new Error(`component from [${route.from}] not found`);\n      }\n    }\n  }\n\n  // [Symbol.iterator]() {\n  //   return this._routes[Symbol.iterator]();\n  // }\n\n  /**\n   * イベントを定義する\n   * @param {...string} args from, event, controller, action(前提としたものは省く)それぞれの名称文字列\n   * @return {void}\n   * @example\n   * router.event('shell', 'clicked', 'ShellController', 'shell_clicked') // full\n   * router.event('shell', 'clicked', 'ShellController') // event = action\n   * router.controller('ShellController', function(router) {\n   *   router.event('shell', 'clicked') // controllerは前提があるので省く\n   * });\n   * router.from('shell', function(router) {\n   *   router.controller('ShellController', function(router) {\n   *     router.event('clicked') // from, controllerは前提があるので省く\n   *   });\n   * });\n   */\n  event(...args) {\n    if (this._current_from && this._current_controller) {\n      if (args.length > 2) throw new Error('arguments too long');\n      this.event_on_from_controller(...args);\n    } else if (this._current_from) {\n      if (args.length > 3) throw new Error('arguments too long');\n      this.event_on_from(...args);\n    } else if (this._current_controller) {\n      if (args.length > 3) throw new Error('arguments too long');\n      this.event_on_controller(...args);\n    } else {\n      this.event_on_none(...args);\n    }\n  }\n\n  /**\n   * from, controllerを前提としてイベントを定義する\n   * @param {string} event イベント\n   * @param {string} [action] アクション\n   * @return {void}\n   */\n  event_on_from_controller(event, action = event) {\n    const from = this._current_from;\n    const controller = this._current_controller;\n    this.add_route(from, event, controller, action);\n  }\n\n  /**\n   * fromを前提としてイベントを定義する\n   * @param {string} event イベント\n   * @param {string} controller コントローラ\n   * @param {string} [action] アクション\n   * @return {void}\n   */\n  event_on_from(event, controller, action = event) {\n    const from = this._current_from;\n    this.add_route(from, event, controller, action);\n  }\n\n  /**\n   * controllerを前提としてイベントを定義する\n   * @param {string} from イベント発生源\n   * @param {string} event イベント\n   * @param {string} [action] アクション\n   * @return {void}\n   */\n  event_on_controller(from, event, action = event) {\n    const controller = this._current_controller;\n    this.add_route(from, event, controller, action);\n  }\n\n  /**\n   * 前提なしとしてイベントを定義する\n   * @param {string} from イベント発生源\n   * @param {string} event イベント\n   * @param {string} controller コントローラ\n   * @param {string} [action] アクション\n   * @return {void}\n   */\n  event_on_none(from, event, controller, action = event) {\n    this.add_route(from, event, controller, action);\n  }\n\n  /**\n   * イベント発生源を前提とする\n   * @param {string} from イベント発生源プロパティ名\n   * @param {Function} block 前提としたイベント発生源におけるルート定義を行う関数\n   * @return {void}\n   */\n  from(from, block) {\n    this._current_from = from;\n    block(this);\n    delete this._current_from;\n  }\n\n  /**\n   * コントローラーを前提とする\n   * @param {string} controller コントローラ名\n   * @param {Function} block 前提としたコントローラにおけるルート定義を行う関数\n   * @return {void}\n   */\n  controller(controller, block) {\n    this._current_controller = controller;\n    block(this);\n    delete this._current_controller;\n  }\n\n  /**\n   * ルート定義を追加する\n   * @param {string} from イベント発生源\n   * @param {string} event イベント\n   * @param {string} controller コントローラ\n   * @param {string} action アクション\n   * @return {void}\n   */\n  add_route(from, event, controller, action) {\n    this._routes.push(new RoutableComponentRoute(from, event, controller, action));\n  }\n\n  /**\n   * ルーティングの状態を返す\n   * @return {string} ルーティングの状態を示す文字列\n   */\n  toString() {\n    return this._routes\n      .sort((a, b) =>\n        (a.from === b.from ? 0 : a.from > b.from ? 10 : -10)\n          + (a.event === b.event ? 0 : a.event > b.event ? 1 : -1)\n      )\n      .map((route) => route.toString() + '\\n')\n      .join('');\n  }\n}\n\n/**\n * ルート\n */\nexport class RoutableComponentRoute {\n  /**\n   * コンストラクタ\n   * @param {string} from イベント発生源\n   * @param {string} event イベント\n   * @param {string} controller コントローラ\n   * @param {string} action アクション\n   */\n  constructor(from, event, controller, action) {\n    this._check_constructor_arguments(from, event, controller, action);\n    this._from = from;\n    this._event = event;\n    this._controller = controller;\n    this._action = action;\n  }\n\n  _check_constructor_arguments(from, event, controller, action) {\n    const isString = (obj) => typeof obj === 'string' || obj instanceof String;\n    if (from == null) throw new Error('register routing error: from is empty!');\n    if (event == null) throw new Error('register routing error: event is empty!');\n    if (controller == null) throw new Error('register routing error: controller is empty!');\n    if (action == null) throw new Error('register routing error: action is empty!');\n    if (!isString(from) || !isString(event) || !isString(controller) || !isString(action)) {\n      throw new Error('register routing error: arguments must be string!');\n    }\n  }\n\n  /**\n   * イベント発生源\n   * @type {string}\n   */\n  get from() { return this._from; }\n  /**\n   * イベント\n   * @type {string}\n   */\n  get event() { return this._event; }\n  /**\n   * コントローラ\n   * @type {string}\n   */\n  get controller() { return this._controller; }\n  /**\n   * アクション\n   * @type {string}\n   */\n  get action() { return this._action; }\n\n  /**\n   * ルーティングの状態を返す\n   * @return {string} ルーティングの状態を示す文字列\n   */\n  toString() {\n    return `${this.from}.${this.event} => ${this.controller}#${this.action}`;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/routable-component.js\n **/","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      }\n      throw TypeError('Uncaught, unspecified \"error\" event.');\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/events/events.js\n ** module id = 1\n ** module chunks = 0\n **/"],"sourceRoot":""}